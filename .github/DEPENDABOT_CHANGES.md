# Dependabot設定変更のお知らせ

## 変更内容

このPRでは、Dependabotが生成するプルリクエストの数を大幅に削減するための設定変更を実施しました。

### 主な変更点

#### 1. 更新頻度の変更
- **変更前**: 週次（毎週月曜日）
- **変更後**: 月次（毎月第1月曜日）
- **理由**: PRの作成頻度を削減し、管理負担を軽減

#### 2. PRの最大数の削減
- **npm依存関係**: 5個 → 3個
- **GitHub Actions**: 制限なし → 1個
- **理由**: 同時にオープンなPRの数を制限し、レビュー負担を軽減

#### 3. グルーピング戦略の変更
**変更前**:
- linting（ESLint、Prettier関連）
- testing（テスト関連）
- tailwind（Tailwind CSS関連）
- radix（Radix UI関連）
- types（型定義）
- react（React関連）
- dev-dependencies（その他開発依存関係）

**変更後**:
- **all-dependencies**: マイナー・パッチ更新を全て1つのPRにまとめる
- **security-updates**: セキュリティ更新のみを別PRで作成（最優先）

**理由**: より積極的なグルーピングにより、PRの数を最小化

#### 4. 許可される更新の制限
**変更前**: 全ての依存関係タイプと更新タイプを許可

**変更後**:
- 本番依存関係: セキュリティ、パッチ、マイナー更新のみ
- 直接依存関係: セキュリティ更新のみ
- メジャーバージョン更新: 手動で確認・適用

**理由**: 破壊的変更の可能性があるメジャーバージョン更新を自動化から除外

## 既存のオープンPRへの対応

現在オープンになっている以下のDependabot PRs:
- PR #33: React 19.2.3
- PR #32: Browserslist 4.28.1
- PR #30: Tailwind CSS関連
- PR #29: ESLint/Prettier関連
- PR #24: Framer Motion 12

### 推奨される対応

#### オプション1: 一括クローズ（推奨）
新しいグルーピング戦略により、次回の月次更新（2026年1月第1月曜日）で全ての依存関係が1つのPRにまとめられます。

```bash
# 提供されたスクリプトを使用
./scripts/manage-dependabot-prs.sh
# オプション1を選択
```

または手動で:
```bash
for pr in 33 32 30 29 24; do
  gh pr close $pr --comment "新しいDependabot設定により、このPRをクローズします。次回の月次更新で統合されます。"
done
```

#### オプション2: セキュリティPRのみマージ
セキュリティラベルがついたPRがあれば、それだけマージ：

```bash
# セキュリティPRを確認
gh pr list --label security

# セキュリティPRをマージ（該当する場合）
gh pr merge <PR番号> --squash

# 残りをクローズ
./scripts/manage-dependabot-prs.sh
```

## 今後の運用

### 月次チェックリスト
1. ✅ 月初第1月曜日にDependabot PRが作成される
2. ✅ PRの内容を確認（破壊的変更のチェック）
3. ✅ テストが通ることを確認
4. ✅ 問題なければマージ

### セキュリティ更新
- 別途PRが作成されるため、即座に対応
- 優先度: 最高

### メジャーバージョン更新
- 自動では作成されない
- 必要に応じて手動で更新
- 破壊的変更を慎重に確認

## 管理ツール

### 1. 管理スクリプト
```bash
./scripts/manage-dependabot-prs.sh
```
対話型のスクリプトで以下の操作が可能:
- 全PRのクローズ
- セキュリティPRの確認
- 個別PRのクローズ
- PR詳細の表示

### 2. ドキュメント
詳細な運用ガイド: `.github/DEPENDABOT_MANAGEMENT.md`

## 期待される効果

### Before（変更前）
- 週次で複数のPRが作成
- 最大5-7個のPRが同時にオープン
- 個別にレビュー・マージが必要
- 管理負担が大きい

### After（変更後）
- 月次で最大3個のPRのみ
- 関連する更新が1つのPRにまとめられる
- セキュリティ更新のみ別PR（優先対応）
- 管理負担が大幅に軽減

## ロールバック方法

もし設定を元に戻したい場合:

```bash
git checkout HEAD~1 .github/dependabot.yml
git commit -m "Revert Dependabot configuration changes"
```

## 質問・フィードバック

この変更について質問やフィードバックがあれば、このPRにコメントしてください。

---

**Note**: この変更は、依存関係の更新を停止するものではありません。より効率的に管理するための設定変更です。セキュリティ更新は引き続き迅速に対応されます。
