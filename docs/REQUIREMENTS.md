# 要件定義書 (REQUIREMENTS.md)

## 1. プロジェクト概要

### 1.1 目的・ゴール
*   **「関東温泉紀行」の最高品質化**: ベンチマークサイト（和倉温泉 あえの風）に匹敵する、没入感と高級感のある温泉紹介サイトを構築する。
*   **圧倒的な情報量**: 既存の21箇所にとどまらず、関東全域（100箇所以上）の名湯・秘湯を網羅し、各温泉地について「そこに行ける」レベルの詳細情報（泉質、効能、アクセス、宿、周辺観光）を提供する。
*   **汎用量産エンジンの確立**: コンテンツ（JSON）とデザイン（テーマ）を分離し、異なるテーマのサイトを容易に量産できるアーキテクチャを完成させる。

### 1.2 スコープとフェーズ
*   **フェーズ1: 土台作り（完了・補完中）**
    *   リポジトリ整理、ドキュメント整備、基本ルール策定。
    *   **データスキーマ設計、コンテンツ拡充戦略の策定（現在進行中）**。
*   **フェーズ2: コアシステム再構築**
    *   型定義の厳格化、画像システムの抽象化。
    *   Tailwind設定の刷新（テーマ変数化）。
    *   ルーティングの一時リセットと基盤コンポーネント実装。
*   **フェーズ3: 新デザイン実装（大改造）**
    *   没入感のあるUI（フルスクリーンHero、パララックス、全画面ナビ）の実装。
    *   脱・コンテナレイアウト（フルブリード）の適用。
*   **フェーズ4: コンテンツ統合・完成**
    *   APIを活用した大規模データの収集と統合。
    *   高品質画像の差し替えとユーザー承認フローの実行。
    *   最終調整とリリース。

## 2. コンテンツ・データ要件

### 2.1 大規模データの構造化
*   **対象**: 関東エリア（東京、神奈川、千葉、埼玉、群馬、栃木、茨城）の温泉地。
*   **詳細度**: 以下の情報を構造化データとして保持する（`onsen-types.ts`の拡張）。
    *   **基本情報**: 名称、キャッチコピー、紹介文。
    *   **泉質データ**: 泉質名、pH値、効能、禁忌症、湯の色・匂い。
    *   **アクセス詳細**: 東京からの所要時間、最寄り駅、バス情報、車でのアクセス（IC名）。
    *   **施設情報**: 日帰り入浴可否、露天風呂の有無、貸切風呂の有無、宿泊施設リスト。
    *   **周辺観光**: 観光スポット、グルメ情報。

### 2.2 データ収集・生成戦略（API活用）
*   **Gemini API活用**:
    *   環境変数に設定されたAPIキーを使用し、温泉地の詳細情報や構造化データを自動生成・収集するスクリプトを開発する。
    *   ※API利用は無料枠を超えない範囲で慎重に行うこと。
*   **画像収集**:
    *   `scripts/search-onsen-images-gemini.py` 等を活用し、高品質な実写画像を収集する。
    *   **重要ルール**: 収集した画像は**自動的にサイトに反映しない**。必ずリスト化してユーザーに提示し、承認を得てから `images.ts` や JSON に反映する。

## 3. デザイン・UI要件

### 3.1 コンセプト: 「和モダン・没入感」
*   **没入感 (Immersive)**: 画面全体を使った大胆な写真配置、スムーズなスクロール連動アニメーション。
*   **余白の美学**: 情報を詰め込まず、適切な余白（Whitespace）を持たせて高級感を演出する。
*   **写真主役**: UIパーツ（ボタン、枠線）は主張しすぎず、コンテンツ（写真）を引き立てる配色・デザインとする。

### 3.2 具体的なUI仕様
*   **ナビゲーション**:
    *   スクロール連動型の透過ヘッダー、または全画面メニュー（ハンバーガー）。
    *   予約/詳細への導線（CTA）を常時アクセス可能にする（フローティングボタン等）。
*   **レイアウト**:
    *   `max-w-7xl` 等の固定幅コンテナを原則撤廃し、フルブリード（全幅）レイアウトを基本とする。
    *   グリッドは均等配置だけでなく、雑誌のような非対称レイアウト（Masonry等）を採用する。

## 4. システム・技術要件

### 4.1 アーキテクチャ (JSON First)
*   **完全分離**: コンテンツ（`content.json`）、テキスト（`texts.json`）、デザイン設定（`theme.json`想定）を分離する。
*   **型安全性**: TypeScriptによる厳格な型チェック。`any` は原則禁止。
*   **デプロイ**: GitHub Pages (静的エクスポート `output: 'export'`)。`next/image` の `unoptimized: true` 制約を考慮する。

### 4.2 ディレクトリ構造
*   `app/components/core`: 原子的なUI部品（ボタン、入力欄）。依存なし。
*   `app/components/modules`: 機能単位のコンポーネント（Hero、CardGrid）。JSONデータを受け取る。
*   `app/components/templates`: ページ全体のレイアウト。
*   `app/components/_legacy`: 旧コンポーネント（参照用・段階的廃止）。

## 5. 開発・運用ルール（厳守）

### 5.1 禁止事項
*   **直接Push禁止**: `main` ブランチへの直接Pushは絶対に行わない。コミットのみ行い、指示を待つ。
*   **ファイル変更禁止**: 以下のファイルは原則変更しない（必要な場合は事前に相談）。
    *   `.github/workflows/` (CI/CD設定)
    *   `package.json`, `package-lock.json` (依存関係)
    *   `next.config.mjs` (ビルド設定)
    *   `scripts/` 内のビルド・デプロイ関連スクリプト

### 5.2 品質管理
*   **ビルド・リント**: `npm run build` および `npm run lint` がエラーなく通ることを常に確認する。
*   **レスポンシブ**: PCとモバイルの両方で表示崩れがないか確認する。

### 5.3 タスク管理
*   常にTodoリストを作成・更新し、進捗を可視化する。
*   不明点や技術的課題が発生した場合は、独断で進めずに作業を止めて質問する。
