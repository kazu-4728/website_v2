# 要件定義書 (REQUIREMENTS.md)

## 1. プロジェクト概要

### 1.1 目的・ゴール
*   **最高品質の「温泉紹介サイト」**: ベンチマークサイト（和倉温泉 あえの風）のビジュアルや構成を参考にしつつ、関東の温泉地を魅力的に紹介するメディアを構築する。
*   **※重要**: 本サイトは「宿泊予約サイト」ではない。予約機能や詳細なプラン情報の提供よりも、温泉地の魅力や周辺情報の充実に重きを置く。
*   **圧倒的な情報量**: 関東全域（100箇所以上）の名湯・秘湯を網羅し、ユーザーが「そこに行きたい」と思えるガイド機能を提供する。
*   **汎用量産エンジンの確立**: コンテンツ（JSON）とデザイン（テーマ）を分離し、異なるテーマのサイトを容易に量産できるアーキテクチャを完成させる。

### 1.2 スコープとフェーズ
*   **フェーズ1: 土台作り（完了・補完中）**
    *   リポジトリ整理、ドキュメント整備、基本ルール策定。
    *   データスキーマ設計、コンテンツ拡充戦略の策定。
*   **フェーズ2: コアシステム再構築**
    *   型定義の厳格化、画像システムの抽象化。
    *   Tailwind設定の刷新（テーマ変数化）。
    *   **チェック機能の整備（リンク切れ・画像重複）**。
*   **フェーズ3: 新デザイン実装（大改造）**
    *   没入感のあるUI（フルスクリーンHero、パララックス、全画面ナビ）の実装。
    *   脱・コンテナレイアウト（フルブリード）の適用。
*   **フェーズ4: コンテンツ統合・完成**
    *   APIを活用した大規模データの収集と統合。
    *   高品質画像の収集と反映。
    *   最終調整とリリース。

## 2. コンテンツ・データ要件

### 2.1 温泉地データの構造化
*   **基本情報**: 名称、キャッチコピー、紹介文、泉質データ（泉質名、pH値、効能）。
*   **アクセス詳細**: 東京からの所要時間、最寄り駅、バス情報、車でのアクセス。**Google Mapsは埋め込みでなくリンクでも可**。
*   **周辺観光**: 観光スポット、グルメ情報の充実。
*   **宿泊施設（紹介のみ）**:
    *   各温泉地につき**代表的な施設を5箇所程度**掲載する。
    *   必須情報: 施設名、画像、特徴、予約サイト（楽天・じゃらん等）へのリンク。
    *   ※詳細な宿泊プランや予約エンジンの実装は不要。

### 2.2 データ収集・生成戦略（API活用）
*   **Gemini API活用**:
    *   環境変数に設定されたAPIキーを使用し、温泉地の詳細情報や構造化データを自動生成・収集するスクリプトを開発する。
*   **画像収集ポリシー（緩和・効率化）**:
    *   `scripts/search-onsen-images-gemini.py` 等を活用し、高品質な実写画像を収集する。
    *   **自動反映**: その地域の温泉が映っている、またはコンテンツとして適切な画像であれば、**自動的に反映して構わない**。
    *   **確認フロー**: 画像収集を行った際は、リポジトリのimgフォルダに場所が分かるように置くか、チャットにリスト化してリンクを提示し、事後確認を可能にする。修正指示があれば即座に対応する。

## 3. デザイン・UI要件

### 3.1 コンセプト: 「和モダン・没入感」
*   **没入感 (Immersive)**: 画面全体を使った大胆な写真配置。
*   **ベンチマークの扱い**: 「あえの風」はあくまでビジュアルやサイト構成の参考であり、機能（予約システム等）を模倣する必要はない。

### 3.2 具体的なUI仕様
*   **ナビゲーション**: スクロール連動型の透過ヘッダー、または全画面メニュー。
*   **レイアウト**: フルブリード（全幅）レイアウトを基本とする。
*   **導線**: 宿泊施設紹介エリアには、楽天・じゃらん等の外部予約サイトへのリンクを目立つように配置する。

## 4. システム・技術要件

### 4.1 アーキテクチャ (JSON First)
*   **完全分離**: コンテンツ（`content.json`）、テキスト（`texts.json`）、デザイン設定（`theme.json`想定）を分離する。
*   **品質管理機能（新規）**:
    *   **リンク切れチェック**: 定期的に外部リンクの有効性を確認するスクリプトを実装する。
    *   **画像重複チェック**: 同一の画像URLが不適切な形で複数の場所に使い回されていないかチェックする機能を実装する。

### 4.2 ディレクトリ構造
*   `app/components/core`: 原子的なUI部品。
*   `app/components/modules`: 機能単位のコンポーネント。
*   `app/components/templates`: ページレイアウト。
*   `app/components/_legacy`: 旧コンポーネント。

## 5. 開発・運用ルール（厳守）

### 5.1 禁止事項
*   **直接Push禁止**: `main` ブランチへの直接Pushは禁止。コミットのみ行い、指示を待つ。
*   **ファイル変更禁止**: `.github/workflows/`, `package.json`, `next.config.mjs` 等の基盤設定。

### 5.2 品質管理
*   **ビルド・リント**: `npm run build` および `npm run lint` がエラーなく通ることを常に確認する。
*   **チェック実行**: コンテンツ追加時にはリンクチェック・画像重複チェックを実行する。

### 5.3 タスク管理
*   常にTodoリストを作成・更新し、進捗を可視化する。
