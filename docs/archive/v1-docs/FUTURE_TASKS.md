# 今後の課題

最終更新: 2025/11/30

## 📋 概要

サイトの基本機能は実装済みですが、以下の課題が残っています。

---

## 🖼️ 画像関連の課題

### 1. 温泉画像の品質向上

**現状:**
- 18個中17個が適切な温泉画像と判定されているが、実際には一部の画像が温泉そのものではない可能性がある
- タイトルに「onsen」が含まれていても、実際の画像内容が温泉ではない場合がある

**課題:**
- [ ] 各温泉地の画像を実際に確認し、温泉の画像でないものを再取得
- [ ] 画像検索スクリプト（`scripts/fetch-wikimedia-images.js`）の検索条件をさらに改善
- [ ] 画像の内容を手動で確認し、適切でない画像をリスト化
- [ ] 準備中画像（`hakone-yunohana`, `kusatsu-sainokawara`, `okutama`）の適切な画像を取得

**優先度:** 高

**関連ファイル:**
- `scripts/fetch-wikimedia-images.js`
- `data/wikimedia-images.json`
- `scripts/verify-onsen-images.js`

---

## 🔧 機能の未完成部分

### 1. ハンバーガーメニューの動作確認

**現状:**
- 基本的な機能は実装済みだが、一部のページで正しく動作しない可能性がある

**課題:**
- [ ] すべてのページでハンバーガーメニューが正しく動作することを確認
- [ ] モバイル表示での動作確認
- [ ] サブメニューのアニメーションがスムーズか確認

**優先度:** 中

**関連ファイル:**
- `app/components/navigation/Header.tsx`

### 2. 画像の最適化

**現状:**
- GitHub Pagesの静的エクスポートでは画像最適化が無効（`unoptimized: true`）
- 画像が元のサイズのまま読み込まれるため、読み込みが遅い可能性がある

**課題:**
- [ ] 画像の事前最適化（ビルド時に画像をリサイズ・圧縮）
- [ ] WebP形式への変換
- [ ] 画像の遅延読み込み（Lazy Loading）の実装
- [ ] 画像CDNの検討（Cloudinary、ImageKitなど）

**優先度:** 中

**関連ファイル:**
- `next.config.mjs`
- `app/lib/images.ts`
- `scripts/`（画像最適化スクリプトの追加）

### 3. コンテンツの充実

**現状:**
- サブページのテキスト量が少ない可能性がある

**課題:**
- [ ] 各温泉地の詳細情報を充実させる
- [ ] 各ページの説明文を拡充
- [ ] ブログ記事の追加
- [ ] お問い合わせフォームの実装（現在はメールアドレスのみ）

**優先度:** 低

**関連ファイル:**
- `themes/onsen-kanto/content.json`
- `app/contact/page.tsx`

### 4. SEO対策

**現状:**
- 基本的なSEO設定は実装済み（sitemap、robots.txt）

**課題:**
- [ ] メタタグの最適化
- [ ] Open Graphタグの追加
- [ ] 構造化データ（JSON-LD）の追加
- [ ] パンくずリストの実装

**優先度:** 低

**関連ファイル:**
- `app/layout.tsx`
- `app/sitemap.ts`
- `app/robots.ts`

### 5. パフォーマンス最適化

**現状:**
- 基本的な最適化は実装済み

**課題:**
- [ ] バンドルサイズの分析と最適化
- [ ] コード分割の改善
- [ ] フォントの最適化
- [ ] キャッシュ戦略の見直し

**優先度:** 低

**関連ファイル:**
- `next.config.mjs`
- `app/layout.tsx`

---

## 🧪 テスト関連の課題

### 1. テストの修正

**現状:**
- 一部のテストが失敗している（`SKIP_CHECK=true`でスキップされている）

**課題:**
- [ ] 失敗しているテストを修正
- [ ] テストのモックデータを実際のデータに合わせる
- [ ] E2Eテストの追加（Playwright、Cypressなど）

**優先度:** 中

**関連ファイル:**
- `tests/lib/images.test.ts`
- `tests/integration/image-display.test.ts`
- `tests/integration/image-quality.test.ts`

---

## 📝 ドキュメント関連の課題

### 1. 開発者向けドキュメントの充実

**現状:**
- 基本的なドキュメントは存在する

**課題:**
- [ ] 画像取得スクリプトの使い方の詳細化
- [ ] テーマの追加方法のドキュメント化
- [ ] デプロイ手順の明確化
- [ ] トラブルシューティングガイドの追加

**優先度:** 低

**関連ファイル:**
- `docs/`ディレクトリ内の各種ドキュメント

---

## 🎨 UI/UX関連の課題

### 1. レスポンシブデザインの改善

**現状:**
- 基本的なレスポンシブ対応は実装済み

**課題:**
- [ ] タブレット表示の最適化
- [ ] モバイル表示の細かい調整
- [ ] タッチデバイスでの操作性の向上

**優先度:** 低

### 2. アクセシビリティの向上

**現状:**
- 基本的なアクセシビリティ対応は実装済み

**課題:**
- [ ] ARIA属性の追加
- [ ] キーボードナビゲーションの改善
- [ ] スクリーンリーダー対応の確認
- [ ] コントラスト比の確認と改善

**優先度:** 低

---

## 🔒 セキュリティ関連の課題

### 1. セキュリティヘッダーの追加

**現状:**
- 基本的なセキュリティ対策は実装済み

**課題:**
- [ ] Content Security Policy (CSP) の設定
- [ ] セキュリティヘッダーの追加（X-Frame-Options、X-Content-Type-Optionsなど）

**優先度:** 低

**関連ファイル:**
- `next.config.mjs`
- `.github/workflows/`（セキュリティチェックの追加）

---

## 📊 優先度別のまとめ

### 🔴 高優先度
1. **温泉画像の品質向上** - サイトの信頼性に直結

### 🟡 中優先度
1. **ハンバーガーメニューの動作確認** - ユーザー体験に影響
2. **画像の最適化** - パフォーマンスに影響
3. **テストの修正** - コード品質の維持

### 🟢 低優先度
1. **コンテンツの充実** - サイトの価値向上
2. **SEO対策** - 検索エンジンでの可視性向上
3. **パフォーマンス最適化** - ユーザー体験の向上
4. **ドキュメントの充実** - 開発効率の向上
5. **UI/UXの改善** - ユーザー体験の向上
6. **セキュリティ対策** - サイトの安全性向上

---

## 🛠️ 推奨される作業順序

1. **まず実施すべきこと:**
   - 温泉画像の実際の内容を確認し、問題のある画像をリスト化
   - 画像検索スクリプトの改善
   - 準備中画像の適切な画像を取得

2. **次に実施すべきこと:**
   - ハンバーガーメニューの全ページでの動作確認
   - テストの修正

3. **余裕があれば実施:**
   - 画像の最適化
   - コンテンツの充実
   - SEO対策
   - その他の改善

---

## 📌 注意事項

- 画像の最適化については、GitHub Pagesの静的エクスポートの制約を考慮する必要がある
- テストの修正は、`SKIP_CHECK=true`を外した状態でも動作するようにする必要がある
- 画像の再取得は、Wikimedia Commons APIのレート制限に注意する必要がある

---

## 🔗 関連ドキュメント

- [IMAGE_ISSUE_REPORT.md](./IMAGE_ISSUE_REPORT.md) - 画像の問題の詳細
- [IMAGE_DATA_LOCATION.md](./IMAGE_DATA_LOCATION.md) - 画像データの場所
- [MASTER_ARCHITECTURE.md](./MASTER_ARCHITECTURE.md) - アーキテクチャの詳細
