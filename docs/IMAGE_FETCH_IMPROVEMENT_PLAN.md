# 画像取得改善計画

作成日: 2025年1月

## 現状分析

### 取得結果
- **取得できた**: 5件（21箇所中）
- **取得できなかった**: 16件

### 評価
- **精度**: 格段に向上（温泉が写っている画像のみ）
- **件数**: 少ないが、質は高い
- **問題点**:
  1. 草津温泉と湯畑が同じ画像（重複）
  2. 検索条件が厳しすぎる可能性
  3. 検索キーワードが不十分な可能性

## 改善案

### 案1: 環境変数にAPIキーを設定して他のサイト検索

**メリット**:
- より多くの画像候補から選択可能
- 確実性が向上

**手順**:
1. Pixabay APIキーを取得（最も簡単、制限なし）
2. Pexels APIキーを取得（200リクエスト/時間）
3. Unsplash APIキーを取得（50リクエスト/時間、レート制限が厳しい）

**推奨**: Pixabay APIキーを設定（最も簡単で制限が緩い）

### 案2: 検索キーワードの改善

**現状の問題**:
- 検索キーワードが不十分な可能性
- より具体的なキーワードを追加

**改善内容**:
- 各温泉地の特徴的なキーワードを追加
  - 例: 箱根 → "Hakone Gora Onsen", "Hakone Ashinoyu", "Hakone Yunohana"
  - 例: 鬼怒川 → "Kinugawa Onsen", "Kinugawa Kogen Onsen"
- 英語と日本語の両方で検索

### 案3: 検索結果の優先順位の調整

**現状の問題**:
- 同じ画像が複数の温泉地で選ばれる（草津温泉と湯畑）

**改善内容**:
- 既に使用した画像URLを記録
- 同じ画像が選ばれないようにする
- より具体的なキーワードを持つ画像を優先

### 案4: 検索条件の緩和（段階的）

**現状の問題**:
- 検索条件が厳しすぎて、多くの温泉地で画像が見つからない

**改善内容**:
1. **第1段階**: 現在の厳格な条件で検索
2. **第2段階**: 条件を緩和して再検索（必須キーワードを1つ減らす）
3. **第3段階**: さらに緩和（場所名のみで検索）

### 案5: 手動で確認した画像を直接追加

**メリット**:
- 確実に適切な画像を追加できる
- 精度を保ちながら件数を増やせる

**手順**:
1. Wikimedia Commonsで手動で検索
2. 適切な画像を見つける
3. `data/wikimedia-images.json`に直接追加

## 推奨される改善順序

### 優先度1: 環境変数にAPIキーを設定（推奨）

**理由**:
- 最も確実に件数を増やせる
- 既存のスクリプトをそのまま使用可能
- 複数のAPIから選択できる

**手順**:
```bash
# Pixabay APIキーを取得（推奨）
# https://pixabay.com/api/docs/

export PIXABAY_API_KEY=your_pixabay_api_key
node scripts/fetch-onsen-images-multi-api.js
```

### 優先度2: 検索キーワードの改善

**理由**:
- より具体的なキーワードで検索できる
- 各温泉地の特徴を活かせる

**改善内容**:
- 各温泉地の具体的なキーワードを追加
- 英語と日本語の両方で検索

### 優先度3: 検索結果の優先順位の調整

**理由**:
- 同じ画像の重複を避けられる
- より適切な画像を選択できる

**改善内容**:
- 既に使用した画像URLを記録
- 同じ画像が選ばれないようにする

### 優先度4: 検索条件の段階的緩和

**理由**:
- 厳格な条件で見つからない場合のフォールバック
- 件数を増やせる

**改善内容**:
- 第1段階: 現在の厳格な条件
- 第2段階: 条件を緩和
- 第3段階: さらに緩和

## 次のステップ

1. **Pixabay APIキーを取得**（推奨）
   - https://pixabay.com/api/docs/
   - 無料アカウントを作成
   - APIキーを取得

2. **環境変数に設定**
   ```bash
   export PIXABAY_API_KEY=your_key
   ```

3. **スクリプトを再実行**
   ```bash
   node scripts/fetch-onsen-images-multi-api.js
   ```

4. **結果を確認**
   - 取得できた画像のURLを確認
   - 精度を確認

5. **必要に応じて改善**
   - 検索キーワードの追加
   - 検索条件の調整
